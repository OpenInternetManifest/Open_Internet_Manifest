<!-- _layouts/thesis.html -->
<!DOCTYPE html>
<html lang="{{ page.lang | default: 'nl' | downcase }}">
 <head>
    <meta charset="UTF-8">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{ page.description | default: site.description }}">
    {% seo %}

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css">
   
    <!-- Centrale hashes + hash-verify JS (voor integriteitscheck) -->
    <script src="{{ site.baseurl }}/assets/js/official-hashes.js"></script>
    <script src="{{ site.baseurl }}/assets/js/hash-verify.js"></script>
    <script src="{{ site.baseurl }}/assets/js/hash-verifier.js"></script>
  </head>
  <body>
<nav class="main-nav">
  <div class="nav-container">
    <!-- Terug knop – altijd zichtbaar links -->
    <a href="javascript:history.back()" class="nav-back" aria-label="Terug">
      ← {% if page.lang | default: 'nl' | downcase == 'en' %}Back{% else %}Terug{% endif %}
    </a>
      
    <div class="nav-logo-wrapper">
  <a href="{{ site.baseurl }}/" class="nav-logo">#OIM</a>
  <span class="visitor-counter" title="Bezoekers sinds lancering">
   <img src="https://openinternetmanifest.goatcounter.com/counter/@.svg?style=flat" alt="Bezoekers teller" style="border:none; height:1.5em; margin-left:0.8em;">
  </span>
</div>

    <a href="{{ site.baseurl }}/" class="nav-logo"></a>

    <!-- Desktop links -->
    <div class="nav-links desktop-only">
      {% assign current_lang = page.lang | default: 'nl' | downcase %}

      <a href="{{ site.baseurl }}/{{ current_lang }}/manifest">
        {% if current_lang == 'en' %}All theses{% else %}Alle theses{% endif %}
      </a>
      <a href="{{ site.baseurl }}/{{ current_lang }}/guides">
        Guides
      </a>
       <a href="{{ site.baseurl }}/{{ current_lang }}/social-posts">
        Socials
      </a>
      <a href="{{ site.baseurl }}/{{ current_lang }}/{% if current_lang == 'en' %}about{% else %}over{% endif %}">
        {% if current_lang == 'en' %}About{% else %}Info{% endif %}
      </a>
      <a href="{{ site.baseurl }}/{{ current_lang }}/hash-verifier">Verifier</a>
      <a href="{{ site.baseurl }}/">Home</a>
    </div>

    <!-- Hamburger rechts -->
   <div class="nav-toggle-wrapper">
  <button class="nav-toggle" aria-label="Menu openen">
    <span></span>
    <span></span>
    <span></span>
  </button>
</div>

  <!-- Mobiel menu – ZONDER terug knop (die staat al links) -->
  <div class="mobile-menu">
    {% assign current_lang = page.lang | default: 'nl' | downcase %}

    <a href="{{ site.baseurl }}/{{ current_lang }}/manifest">
      {% if current_lang == 'en' %}All theses{% else %}Alle theses{% endif %}
    </a>
    <a href="{{ site.baseurl }}/{{ current_lang }}/guides">Guides</a>
     <a href="{{ site.baseurl }}/{{ current_lang }}/social-posts">
        Socials
      </a>
    <a href="{{ site.baseurl }}/{{ current_lang }}/{% if current_lang == 'en' %}about{% else %}over{% endif %}">
      {% if current_lang == 'en' %}About{% else %}Info{% endif %}
    </a>
    <a href="{{ site.baseurl }}/{{ current_lang }}/hash-verifier">Verifier</a>
    <a href="{{ site.baseurl }}/">Home</a>
  </div>
</nav>
    
<!-- <a id="skip-to-content" href="#content">Skip to the content</a> -->

 <!-- Banner met overlay -->
    <header class="custom-header" role="banner">
      <div class="banner">
        <img src="{{ site.baseurl }}/assets/banner-donker.jpg" alt="Open Internet Manifest">
        <div class="overlay-text">
          <h1>Open Internet Manifest</h1>
          <p>
          {% assign lang_code = page.lang | default: 'nl' | downcase %}
          {% if lang_code == 'en' %}
          English version · 100 theses for a free, open and unalienable internet
          {% else %}
          Nederlandse versie · 100 theses voor een vrij, open en onvervreemdbaar internet
          {% endif %}
          </p>
        </div>
      </div>
    </header>

     <!-- Main content met pijlen -->
    <main id="content" class="main-content" role="main">
      <div class="thesis-navigation-arrows">
  {% if page.previous_thesis %}
    <a href="{{ page.previous_thesis }}" class="nav-arrow nav-arrow-left" aria-label="Vorige thesis">
      ‹
    </a>
  {% endif %}

  {% if page.next_thesis %}
    <a href="{{ page.next_thesis }}" class="nav-arrow nav-arrow-right" aria-label="Volgende thesis">
      ›
    </a>
  {% endif %}
</div>

      <div class="thesis-content">
        {{ content }}
      </div>

      {% include reactions.html %}
      
      {% include donation.html %}

      {% assign lang = page.lang | default: 'NL' | upcase %}
      {% include integrity-check-{{ lang }}.html %}

      {% include page-footer.html %}

       <!-- GoatCounter privacy-first analytics -->
<script data-goatcounter="https://openinternetmanifest.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

    </main>
  </body>
  <!-- JS toggle -->
<script>
  const toggle = document.querySelector('.nav-toggle');
  const menu = document.querySelector('.mobile-menu');
  const navContainer = document.querySelector('.nav-container'); // of '.main-nav'

  if (toggle && menu) {
    // Open/sluiten bij klik op hamburger
    toggle.addEventListener('click', (e) => {
      e.stopPropagation(); // voorkom dat klik direct doorgesluisd wordt naar document
      menu.classList.toggle('open');
    });

    // Sluiten bij klik ergens buiten het menu
    document.addEventListener('click', (e) => {
      if (menu.classList.contains('open')) {
        // Check of de klik NIET binnen het menu of op de hamburger is
        if (!menu.contains(e.target) && !toggle.contains(e.target)) {
          menu.classList.remove('open');
        }
      }
    });

    // Optioneel: sluiten bij klik op een menu-link zelf (handig na navigatie)
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.remove('open');
      });
    });
  }
</script>
</html>