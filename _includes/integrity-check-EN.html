<details class="integrity-check">
  <summary>ðŸ”’ Verify integrity of this page (SHA256)</summary>
  <div class="integrity-content">
    <p><strong>How to verify?</strong></p>
    <ol class="integrity-steps">
      <li>Copy the page text with the button below</li>
      <li>Go to an online SHA256 tool, e.g. <a href="https://emn178.github.io/online-tools/sha256.html" target="_blank">this one</a>.</li>
      <li>Paste the text and calculate the hash.</li>
      <li>Paste the hash below and click "Verify".</li>
    </ol>

    <!-- Copy button within dropdown -->
    <div class="copy-container-inline">
      <button onclick="copyPageText()" class="big-copy-btn">
        ðŸ“‹ Copy page text
      </button>
      <p id="copy-feedback" class="copy-feedback"></p>
    </div>

    <div class="verify-section">
      <input type="text" id="user-hash" class="hash-input" placeholder="Paste your calculated SHA256 hash here">
      <button onclick="verifyHash()" class="verify-btn">
        Verify hash
      </button>
      <p id="verify-feedback" class="verify-feedback"></p>
    </div>
  </div>
</details>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const path = window.location.pathname.replace(/\/$/, '');
    const expectedHash = officialHashes[path] || 'Not found';

    window.verifyHash = function() {
      const userHash = document.getElementById('user-hash').value.trim().toLowerCase();
      const feedback = document.getElementById('verify-feedback');

      if (!userHash) {
        feedback.innerHTML = '<span style="color: #ff6666;">âœ— Enter a hash</span>';
        return;
      }

      if (userHash === expectedHash.toLowerCase()) {
        feedback.innerHTML = '<span style="color: #66ff66; font-weight: bold;">âœ“ PERFECT MATCH! This page is 100% authentic.</span>';
      } else {
        feedback.innerHTML = `<span style="color: #ff6666; font-weight: bold;">âœ— No match</span><br>
          <strong>Your hash:</strong> <code>${userHash}</code><br>
          <strong>Official hash:</strong> <code>${expectedHash}</code>`;
      }
    };
  });
</script>